<!doctype html>
<html lang="en" data-theme="auto">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nedara / LWS Manager</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script type="text/javascript" src="{{ url_for('static', filename='lib/jquery/jquery.min.js') }}"></script>
    <script type="module" src="{{ url_for('static', filename='lib/nedara/nedara.min.js') }}"></script>
    <script type="module" src="{{ url_for('static', filename='lws.js') }}"></script>
</head>
<body>
    <div class="container">
        <nav class="navbar">
            <div class="branding">
                <h3 class="logo">Nedara</h3>
                <h4 class="subtitle">Linux Web Service Manager</h4>
            </div>
            <div class="nav-actions">
                <div class="theme-selector">
                    <i class="fas fa-adjust theme-icon"></i>
                    <select class="theme-select">
                        <option value="light">Light</option>
                        <option value="dark">Dark</option>
                        <option value="auto">Auto (System)</option>
                    </select>
                </div>
                {% if monitoring_url %}
                <a href="{{ monitoring_url }}" target="new" class="nav-link">
                    <i class="fas fa-chart-line"></i>
                    <span>Open Monitoring Tool</span>
                </a>
                {% endif %}
            </div>
        </nav>

        <main>
            <div class="loader" style="display: none"></div>

            <!-- Authentication Card -->
            <div class="card">
                <div class="card-header">
                    <h4 class="card-title">
                        <i class="fas fa-lock"></i>
                        Authentification
                    </h4>
                </div>
                <div class="login" role="group">
                    <div class="form-group">
                        <input type="password" name="password" class="form-control" placeholder="Enter password" required>
                    </div>
                    <button class="btn btn-primary submit_password">
                        <i class="fas fa-sign-in-alt"></i>
                        Login
                    </button>
                </div>
                <div class="alert alert-success success_auth" style="display: none">
                    <i class="fas fa-check-circle"></i>
                    <strong>You are authentified :-)</strong>
                </div>
                <div class="alert alert-danger error_auth" style="display: none; margin-top: 1rem;">
                    <i class="fas fa-exclamation-circle"></i>
                    <strong>Wrong password</strong>
                </div>
            </div>

            <!-- Service Selection Card -->
            <div class="card service_block" style="display: none">
                <div class="card-header">
                    <h4 class="card-title">
                        <i class="fas fa-server"></i>
                        Service
                    </h4>
                </div>
                <div class="form-group">
                    <select name="service" class="form-control" required>
                        {% for service_key, service_name in services.items() %}
                        <option value="{{ service_key }}">{{ service_key }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <!-- System Info Card -->
            {% if not disable_system_info %}
            <div class="card system_block" style="display: none">
                <div class="card-header">
                    <h4 class="card-title">
                        <i class="fas fa-microchip"></i>
                        System
                    </h4>
                </div>

                <div class="system-stats" style="display: none">
                    <table id="system-info-table" class="system-info-table">
                        <thead>
                            <tr>
                                <th>Metric</th>
                                <th>Value</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>

                <button class="btn btn-outline" type="submit" name="action" value="system_info">
                    <i class="fas fa-sync"></i>
                    Compute System Info
                </button>
            </div>
            {% endif %}

            <!-- Control Card -->
            <div class="card control_block" style="display: none">
                <div class="card-header">
                    <h4 class="card-title">
                        <i class="fas fa-gamepad"></i>
                        Control
                    </h4>
                </div>
                <div class="btn-group service_control" role="group">
                    <button class="btn btn-success" value="start">
                        <i class="fas fa-play"></i>
                        Start
                    </button>
                    <button class="btn btn-danger" value="stop">
                        <i class="fas fa-stop"></i>
                        Stop
                    </button>
                    <button class="btn btn-outline" value="status">
                        <i class="fas fa-sync"></i>
                        Status
                    </button>
                </div>
            </div>

            <!-- Status Card -->
            <div class="card status_block" style="display: none">
                <div class="card-header">
                    <h4 class="card-title">
                        <i class="fas fa-terminal"></i>
                        Status
                    </h4>
                </div>
                <div class="terminal">
                    <pre class="service_status" style="padding: 10px"></pre>
                </div>
            </div>
        </main>
    </div>
</body>
</html>
